subject: Pike 8.0: Thread.Queue: Attempt to work around glibc bugs
from: 98c4b34202ad673c96fe5cbb00e6d302068e07da
to: 059ea8f8e757fdef21bfe5ee86e5f6d7db126c8d
originator: Marcus Wellhardh
depends: 2018-10-31T234658
restart: true

â€¢ Thread.Queue [Paranoia]: Attempt to work around glibc bugs.

Glibc 2.24 and earlier have a broken implementation of condition
variables (cf https://sourceware.org/bugzilla/show_bug.cgi?id=13165).

Attempt to work around the issue by having the signalling thread
release the associated mutex before signalling.

Potential fix for [Pike-140].